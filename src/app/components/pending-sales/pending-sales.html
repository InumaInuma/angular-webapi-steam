<div class="pending-sales-container">
    <h2>ğŸ“¦ Ventas Pendientes de Entrega</h2>
    <p class="subtitle">Debes enviar estos Ã­tems a los compradores confirmados.</p>

    <div *ngIf="loading" class="loading">Cargando...</div>

    <div *ngIf="!loading && sales.length === 0" class="empty-state">
        <p>No tienes ventas pendientes.</p>
    </div>

    <div class="sales-grid" *ngIf="!loading && sales.length > 0">
        <div class="sale-card" *ngFor="let sale of sales">
            <div class="item-info">
                <img [src]="sale.iconUrl" alt="Item Icon" class="item-icon" />
                <div class="details">
                    <h3>{{ sale.itemName }}</h3>
                    <p class="price">{{ sale.currencyCode }} {{ sale.price | number:'1.2-2' }}</p>
                    <p class="date">ğŸ“… {{ sale.createdAtUtc | date:'short' }}</p>
                </div>
            </div>

            <div class="buyer-info">
                <h4>Comprador</h4>
                <p>ğŸ‘¤ {{ sale.buyerName }}</p>
            </div>

            <div class="actions">
                <button class="btn-trade" (click)="openModal(sale)">
                    ğŸ Enviar Ãtem
                </button>
            </div>

        </div>
    </div>

    <!-- Modal Centrado -->
    <div class="modal-overlay" *ngIf="selectedSale">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar EnvÃ­o</h3>
                <button class="close-btn" (click)="closeModal()" [disabled]="isSending">Ã—</button>
            </div>

            <div class="modal-body">
                <div class="item-preview">
                    <img [src]="selectedSale.iconUrl" alt="item">
                    <div class="info">
                        <span class="name">{{ selectedSale.itemName }}</span>
                        <span class="price">Precio Venta: {{ selectedSale.currencyCode }} {{ selectedSale.price
                            }}</span>
                    </div>
                </div>

                <div class="buyer-details">
                    <p>Se enviarÃ¡ a: <strong>{{ selectedSale.buyerName }}</strong></p>
                    <p class="small">AsegÃºrate de tener el Ã­tem en tu inventario de Steam.</p>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn-cancel" (click)="closeModal()">Cancelar</button>
                <button class="btn-confirm" (click)="confirmSend()">
                    â†— Abrir Steam y Enviar
                </button>
            </div>
        </div>
    </div>
</div>