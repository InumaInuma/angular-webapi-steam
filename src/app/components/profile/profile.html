<div class="profile-container" *ngIf="user; else loading">
    <div class="profile-card">
        <img src="https://ui-avatars.com/api/?name={{ user.displayName }}&size=128" alt="Avatar" class="avatar" />

        <h2 class="name">{{ user.displayName }}</h2>
        <p class="email">{{ user.email }}</p>


        <div class="trade-url-container">
            <label for="tradeUrl">URL de Intercambio (Trade Offer URL)</label>
            <input type="text" id="tradeUrl" [(ngModel)]="newTradeUrl"
                placeholder="https://steamcommunity.com/tradeoffer/new/..." class="trade-input" />
            <button (click)="saveTradeUrl()" [disabled]="isSaving" class="btn-save">
                {{ isSaving ? 'Guardando...' : 'Insertar URL' }}
            </button>
            <p class="trade-display" *ngIf="user.tradeOfferUrl">
                <strong>Actual:</strong> {{ user.tradeOfferUrl }}
            </p>
        </div>

        <div class="trade-url-container api-key-section">
            <label for="apiKey">Steam Web API Key (Para automatización)</label>
            <p class="hint">Obtenla en <a href="https://steamcommunity.com/dev/apikey" target="_blank">steamcommunity.com/dev/apikey</a></p>
            <input type="password" id="apiKey" [(ngModel)]="newApiKey"
                placeholder="Pegar tu API Key aquí..." class="trade-input" />
            <button (click)="saveApiKey()" [disabled]="isSavingKey" class="btn-save btn-key">
                {{ isSavingKey ? 'Guardando...' : 'Guardar API Key' }}
            </button>
        </div>


        <div class="status" [class.banned]="user.isBanned">
            <span *ngIf="!user.isBanned">✅ Activo</span>
            <span *ngIf="user.isBanned">⛔ Suspendido</span>
        </div>
    </div>
</div>

<ng-template #loading>
    <p class="loading">Cargando perfil...</p>
</ng-template>